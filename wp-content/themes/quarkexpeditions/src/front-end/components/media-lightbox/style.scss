/**
 * Media Lightbox.
 */
@import "../../scss";

.media-lightbox {
	$self: &;

	display: block;
	height: 100%;

	&__link {
		border-radius: var(--border-radius-large);
		display: block;
		position: relative;
		overflow: hidden;
		height: inherit;

		&:hover {

			#{$self}__fullscreen {
				opacity: 1;
			}
		}

		button {
			display: block;
			height: 100%;
		}
	}

	&__fullscreen {
		background-color: var(--color-gray-80);
		border-radius: var(--border-radius);
		color: var(--color-white);
		display: flex;
		align-items: center;
		position: absolute;
		bottom: 24px;
		right: 24px;
		padding: var(--spacing-3);
		opacity: 0;

		@include transition();
	}

	&--fullscreen-icon-visible {

		#{$self}__fullscreen {
			opacity: 1;
		}

		#{$self}__link:hover #{$self}__fullscreen {
			background-color: var(--color-black);
		}
	}

	&__image-wrap {
		margin: 0;
		height: 100%;
	}

	&__caption {
		color: var(--color-white);
		font-style: italic;
		font-size: var(--font-size-small);
		line-height: var(--line-height-small);
		padding-top: var(--spacing-5);
		width: fit-content;
		min-height: 46px;
	}

	dialog {

		&::backdrop {
			background-color: rgba(0, 0, 0, 0.9);
		}

		/* stylelint-disable-next-line selector-pseudo-class-no-unknown */
		&:modal {
			background-color: transparent;
			width: 90%;
			max-width: var(--wrap-width);
		}
	}

	&__content {
		overflow: hidden;
		width: 100%;

		> * {

			@include fade-in(0.8s);
		}

		img,
		iframe,
		.wistia_embed {
			border-radius: var(--border-radius-large);
			width: 100%;
			display: block;
			border: none;
			overflow: hidden;
		}

		iframe,
		.wistia_embed {
			aspect-ratio: 16 / 9;
			height: 100%;
			max-height: 80vh;
		}

		img {
			object-fit: cover;

			@media (max-height: 720px) {
				max-height: 80vh;
			}
		}
	}

	&__close {
		display: block;
		position: fixed;
		inset: var(--spacing-5) var(--spacing-5) auto auto;
		width: 16px;
		height: 16px;

		button {
			display: block;
			color: var(--color-white);
			height: 100%;
			width: 100%;

			svg {
				width: 100%;
				height: 100%;
			}
		}
	}

	&__count {
		color: var(--color-white);
		font-size: var(--font-size-small);
		line-height: var(--line-height-small);
		display: block;
		position: absolute;
		bottom: 0;
		right: 0;
	}

	&__prev,
	&__next {

		&[disabled="yes"] {
			opacity: 0.3;

			button {
				cursor: not-allowed;
			}
		}
	}

	&__prev-button {
		left: var(--spacing-5);
		transform: translateY(-50%);
	}

	&__next-button {
		right: var(--spacing-5);
		transform: translateY(-50%);

		svg {
			transform: rotate(180deg);
		}
	}

	&__prev-button,
	&__next-button {
		position: absolute;
		top: calc(50% - 23px);
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background-color: var(--color-black);
		z-index: 2;

		@include transition(background-color);

		@media screen and (min-width: grid-size(lg)) {
			width: 46px;
			height: 46px;
		}
	}

	&__bullets {
		display: inline-flex;
		align-items: flex-end;
		padding: 0;
		position: absolute;
		bottom: 0;
		right: 0;
		min-height: 46px;
		padding-bottom: 10px;
		overflow: auto;
		white-space: nowrap;
		-ms-overflow-style: none; /* for Internet Explorer, Edge */
		scrollbar-width: none; /* for Firefox */
		max-width: 100px;
	}

	&__bullet {
		background-color: var(--color-white);
		cursor: pointer;
		font-size: 0;
		line-height: 1;
		padding: 0;
		height: 8px;
		width: 8px;
		min-width: 8px;
		border-radius: 50%;
		opacity: 0.4;
		margin-left: var(--spacing-2);

		@include transition(opacity);

		&:first-child {
			margin-left: 0;
		}
	}

	&__bullet[current="yes"] {
		opacity: 1;
	}
}

tp-lightbox.media-lightbox[loading] {

	@keyframes lightbox-loading {

		from {
			rotate: 0deg;
		}

		to {
			rotate: 360deg;
		}
	}

	tp-lightbox-content::after {
		content: "";
		display: block;
		inset: 50% auto auto 50%;
		border: 2px solid var(--color-white);
		border-right-color: rgba(0, 0, 0, 0);
		border-radius: 50%;
		width: 25px;
		height: 25px;
		animation: lightbox-loading 0.8s infinite var(--transition-easing);
	}
}

quark-wistia-embed {
	display: block;
}
